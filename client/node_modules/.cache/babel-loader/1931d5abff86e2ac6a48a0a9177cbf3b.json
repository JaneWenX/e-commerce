{"ast":null,"code":"var _jsxFileName = \"/Users/xialiangwen/Desktop/Bootcamp/concordia-bootcamps/project-GROUP-e-commerce/client/src/components/Checkout.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useContext } from \"react\";\nimport { useEffect } from \"react\";\nimport { ItemContext } from \"../context/Context\";\nimport styled from \"styled-components\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Checkout = () => {\n  _s();\n\n  const {\n    cart,\n    setCart\n  } = useContext(ItemContext);\n  const myCart = cart.data;\n  let subtotal = 0;\n  let total = 0;\n  const history = useHistory();\n  useEffect(() => {\n    axios.get(\"/api/cart\").then(res => {\n      // console.log(res)\n      //res.data will display all item info in cart collection\n      //we can decide what to display according to frontend design\n      setCart(res.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  const deleteItem = ev => {\n    const _id = ev.target.id;\n    axios.delete(`/api/cart/${_id}`).then(res => {\n      console.log(res.data);\n      document.location.reload(true);\n    }).catch(err => {\n      console.log(err);\n    });\n  }; //check stock\n  //update stock\n  //onSubmit, this function first posts everything into orderHistory, and then deletes them\n  //all from cart. Then pushes to orderHistory page.\n\n\n  const handleSubmit = ev => {\n    myCart.map(item => {\n      const _id = item._id;\n      axios({\n        method: \"POST\",\n        url: \"/api/orderHistory\",\n        data: {\n          _id: item._id,\n          name: item.name,\n          price: item.price,\n          imageSrc: item.imageSrc,\n          body_location: item.body_location,\n          category: item.category,\n          companyId: item.companyId\n        }\n      });\n      axios.delete(`/api/cart/${_id}`).then(res => {\n        console.log(res.data);\n        history.push(\"/previous-purchases\");\n      }).catch(err => {\n        console.log(err);\n      });\n    });\n  };\n\n  if (!cart || !myCart) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 12\n    }, this);\n  } else {\n    const priceArray = [];\n    return /*#__PURE__*/_jsxDEV(Wrapper, {\n      children: [/*#__PURE__*/_jsxDEV(LeftDiv, {\n        children: [/*#__PURE__*/_jsxDEV(HeaderDiv, {\n          children: [/*#__PURE__*/_jsxDEV(ShoppingCart, {\n            children: \"Shopping Cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CartQuantity, {\n            children: [myCart.length, \" Item(s)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CategoryDiv, {\n          children: [/*#__PURE__*/_jsxDEV(Description, {\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Quantity, {\n            children: \"Quantity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Price, {\n            children: \"Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), myCart.map(item => {\n          let quantity = 1; //removes $ from each of the prices, turns them into a Number, and pushes to an array.\n\n          const itemPriceNoSymbol = item.price.replace(/\\$/g, \"\");\n          const itemPrice = parseInt(itemPriceNoSymbol);\n          priceArray.push(itemPrice); //checks that we're getting the correct total, then adds all of prices together, creating a subtotal\n\n          if (priceArray.length === myCart.length) {\n            const reducer = (accumulator, curr) => accumulator + curr;\n\n            subtotal = priceArray.reduce(reducer); //adds tax\n\n            total = (subtotal * 1.15).toFixed(2);\n          }\n\n          return /*#__PURE__*/_jsxDEV(ItemDiv, {\n            children: [/*#__PURE__*/_jsxDEV(DescriptionDiv, {\n              children: [/*#__PURE__*/_jsxDEV(Img, {\n                src: item.imageSrc,\n                alt: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(SubDescripion, {\n                children: [/*#__PURE__*/_jsxDEV(ItemName, {\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Remove, {\n                  onClick: deleteItem,\n                  id: item._id,\n                  children: \"Remove\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(QuantityDiv, {\n              children: [/*#__PURE__*/_jsxDEV(QuantityButton, {\n                id: item._id,\n                children: \"-\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(ItemQuantity, {\n                children: quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(QuantityButton, {\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(PriceDiv, {\n              children: /*#__PURE__*/_jsxDEV(ItemPrice, {\n                children: item.price\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RightDiv, {\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(Div, {\n            children: \"Order Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Subtotal, {\n            children: [/*#__PURE__*/_jsxDEV(Bold, {\n              children: \"Subtotal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this), \" $\", subtotal]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Total, {\n            children: [/*#__PURE__*/_jsxDEV(Bold, {\n              children: \"Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this), \" $\", total]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Div, {\n            children: \"Personal Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n            placeholder: \"Name\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n            placeholder: \"Surname\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n            placeholder: \"Email\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CheckoutButton, {\n            children: \"Checkout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n};\n\n_s(Checkout, \"llj0RprfzJGfguRzeStd6kg+dXc=\", false, function () {\n  return [useHistory];\n});\n\n_c = Checkout;\nconst Bold = styled.span`\n  font-weight: bold;\n  margin-right: 15px;\n`;\n_c2 = Bold;\nconst CheckoutButton = styled.button`\n  width: 90%;\n  border-radius: 15px;\n  font-family: var(--secondary-font-family);\n  font-size: 25px;\n  border: none;\n  margin-top: 10px;\n  background-color: #ff9966;\n  color: white;\n  cursor: pointer;\n`;\n_c3 = CheckoutButton;\nconst Subtotal = styled.div`\n  font-family: var(--secondary-font-family);\n  font-size: 20px;\n`;\n_c4 = Subtotal;\nconst Total = styled.div`\n  font-family: var(--secondary-font-family);\n  font-size: 20px;\n  margin-bottom: 15px;\n`;\n_c5 = Total;\nconst Div = styled.div`\n  font-family: var(--primary-font-family);\n  font-size: 30px;\n`;\n_c6 = Div;\nconst TextArea = styled.textarea`\n  width: 90%;\n  resize: none;\n  font-family: var(--secondary-font-family);\n  font-size: 17px;\n`;\n_c7 = TextArea;\nconst Form = styled.form``;\n_c8 = Form;\nconst SubDescripion = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n_c9 = SubDescripion;\nconst Remove = styled.button`\n  background: none;\n  border: none;\n  color: grey;\n  font-family: var(--primary-font-family);\n  font-size: 17px;\n  width: 30px;\n  padding: 0;\n  cursor: pointer;\n`;\n_c10 = Remove;\nconst CategoryDiv = styled.div`\n  width: 100%;\n  border-bottom: 1px black solid;\n  color: grey;\n  font-size: 15px;\n  display: flex;\n`;\n_c11 = CategoryDiv;\nconst Description = styled.div`\n  width: 60%;\n  font-family: var(--primary-font-family);\n  margin-top: 3px;\n  padding-left: 5px;\n`;\n_c12 = Description;\nconst DescriptionDiv = styled.div`\n  height: 100%;\n  width: 60%;\n  display: flex;\n  padding-right: 10px;\n  align-items: center;\n`;\n_c13 = DescriptionDiv;\nconst Quantity = styled.div`\n  width: 20%;\n  font-family: var(--primary-font-family);\n  margin-top: 3px;\n`;\n_c14 = Quantity;\nconst CartQuantity = styled.div`\n  font-family: var(--primary-font-family);\n  font-size: 40px;\n`;\n_c15 = CartQuantity;\nconst QuantityButton = styled.button`\n  background: none;\n  border: none;\n  font-size: 17px;\n  cursor: pointer;\n`;\n_c16 = QuantityButton;\nconst ItemQuantity = styled.div``;\n_c17 = ItemQuantity;\nconst QuantityDiv = styled.div`\n  display: flex;\n  width: 20%;\n  align-items: center;\n  padding-left: 7px;\n`;\n_c18 = QuantityDiv;\nconst Price = styled.div`\n  width: 20%;\n  font-family: var(--primary-font-family);\n  margin-top: 3px;\n`;\n_c19 = Price;\nconst PriceDiv = styled.div`\n  width: 20%;\n  display: flex;\n  align-items: center;\n  padding-left: 10px;\n`;\n_c20 = PriceDiv;\nconst ItemPrice = styled.div`\n  font-family: var(--secondary-font-family);\n  font-weight: bold;\n  font-size: 17px;\n`;\n_c21 = ItemPrice;\nconst ShoppingCart = styled.div`\n  font-family: var(--primary-font-family);\n  font-size: 50px;\n`;\n_c22 = ShoppingCart;\nconst HeaderDiv = styled.div`\n  width: 100%;\n  border-bottom: 1px black solid;\n  margin-top: 10px;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n`;\n_c23 = HeaderDiv;\nconst ItemName = styled.div`\n  font-family: var(--primary-font-family);\n  font-size: 20px;\n`;\n_c24 = ItemName;\nconst Img = styled.img`\n  width: 80px;\n  padding-right: 10px;\n`;\n_c25 = Img;\nconst ItemDiv = styled.div`\n  padding: 15px;\n  border-bottom: 1px black solid;\n  display: flex;\n`;\n_c26 = ItemDiv;\nconst LeftDiv = styled.div`\n  width: 60vw;\n`;\n_c27 = LeftDiv;\nconst RightDiv = styled.div`\n  background-color: #fff3e1;\n  width: 30vw;\n  display: flex;\n  flex-direction: column;\n  padding-left: 15px;\n  padding-top: 50px;\n`;\n_c28 = RightDiv;\nconst Wrapper = styled.div`\n  width: 90vw;\n  color: black;\n  position: relative;\n  top: 8vh;\n  left: 10vw;\n  display: flex;\n`;\n_c29 = Wrapper;\nexport default Checkout;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21, _c22, _c23, _c24, _c25, _c26, _c27, _c28, _c29;\n\n$RefreshReg$(_c, \"Checkout\");\n$RefreshReg$(_c2, \"Bold\");\n$RefreshReg$(_c3, \"CheckoutButton\");\n$RefreshReg$(_c4, \"Subtotal\");\n$RefreshReg$(_c5, \"Total\");\n$RefreshReg$(_c6, \"Div\");\n$RefreshReg$(_c7, \"TextArea\");\n$RefreshReg$(_c8, \"Form\");\n$RefreshReg$(_c9, \"SubDescripion\");\n$RefreshReg$(_c10, \"Remove\");\n$RefreshReg$(_c11, \"CategoryDiv\");\n$RefreshReg$(_c12, \"Description\");\n$RefreshReg$(_c13, \"DescriptionDiv\");\n$RefreshReg$(_c14, \"Quantity\");\n$RefreshReg$(_c15, \"CartQuantity\");\n$RefreshReg$(_c16, \"QuantityButton\");\n$RefreshReg$(_c17, \"ItemQuantity\");\n$RefreshReg$(_c18, \"QuantityDiv\");\n$RefreshReg$(_c19, \"Price\");\n$RefreshReg$(_c20, \"PriceDiv\");\n$RefreshReg$(_c21, \"ItemPrice\");\n$RefreshReg$(_c22, \"ShoppingCart\");\n$RefreshReg$(_c23, \"HeaderDiv\");\n$RefreshReg$(_c24, \"ItemName\");\n$RefreshReg$(_c25, \"Img\");\n$RefreshReg$(_c26, \"ItemDiv\");\n$RefreshReg$(_c27, \"LeftDiv\");\n$RefreshReg$(_c28, \"RightDiv\");\n$RefreshReg$(_c29, \"Wrapper\");","map":{"version":3,"sources":["/Users/xialiangwen/Desktop/Bootcamp/concordia-bootcamps/project-GROUP-e-commerce/client/src/components/Checkout.js"],"names":["axios","React","useState","useContext","useEffect","ItemContext","styled","useHistory","Checkout","cart","setCart","myCart","data","subtotal","total","history","get","then","res","catch","err","console","log","deleteItem","ev","_id","target","id","delete","document","location","reload","handleSubmit","map","item","method","url","name","price","imageSrc","body_location","category","companyId","push","priceArray","length","quantity","itemPriceNoSymbol","replace","itemPrice","parseInt","reducer","accumulator","curr","reduce","toFixed","Bold","span","CheckoutButton","button","Subtotal","div","Total","Div","TextArea","textarea","Form","form","SubDescripion","Remove","CategoryDiv","Description","DescriptionDiv","Quantity","CartQuantity","QuantityButton","ItemQuantity","QuantityDiv","Price","PriceDiv","ItemPrice","ShoppingCart","HeaderDiv","ItemName","Img","img","ItemDiv","LeftDiv","RightDiv","Wrapper"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useContext } from \"react\";\nimport { useEffect } from \"react\";\nimport { ItemContext } from \"../context/Context\";\nimport styled from \"styled-components\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Checkout = () => {\n  const { cart, setCart } = useContext(ItemContext);\n  const myCart = cart.data;\n  let subtotal = 0;\n  let total = 0;\n  const history = useHistory();\n\n  useEffect(() => {\n    axios\n      .get(\"/api/cart\")\n      .then((res) => {\n        // console.log(res)\n        //res.data will display all item info in cart collection\n        //we can decide what to display according to frontend design\n        setCart(res.data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  const deleteItem = (ev) => {\n    const _id = ev.target.id;\n    axios\n      .delete(`/api/cart/${_id}`)\n      .then((res) => {\n        console.log(res.data);\n        document.location.reload(true);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  //check stock\n  //update stock\n\n  //onSubmit, this function first posts everything into orderHistory, and then deletes them\n  //all from cart. Then pushes to orderHistory page.\n  const handleSubmit = (ev) => {\n    myCart.map((item) => {\n      const _id = item._id;\n      axios({\n        method: \"POST\",\n        url: \"/api/orderHistory\",\n        data: {\n          _id: item._id,\n          name: item.name,\n          price: item.price,\n          imageSrc: item.imageSrc,\n          body_location: item.body_location,\n          category: item.category,\n          companyId: item.companyId,\n        },\n      });\n\n      axios\n        .delete(`/api/cart/${_id}`)\n        .then((res) => {\n          console.log(res.data);\n          history.push(\"/previous-purchases\");\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    });\n  };\n\n  if (!cart || !myCart) {\n    return <div>Loading</div>;\n  } else {\n    const priceArray = [];\n\n    return (\n      <Wrapper>\n        <LeftDiv>\n          <HeaderDiv>\n            <ShoppingCart>Shopping Cart</ShoppingCart>\n            <CartQuantity>{myCart.length} Item(s)</CartQuantity>\n          </HeaderDiv>\n          <CategoryDiv>\n            <Description>Description</Description>\n            <Quantity>Quantity</Quantity>\n            <Price>Price</Price>\n          </CategoryDiv>\n          {myCart.map((item) => {\n            let quantity = 1;\n\n            //removes $ from each of the prices, turns them into a Number, and pushes to an array.\n            const itemPriceNoSymbol = item.price.replace(/\\$/g, \"\");\n            const itemPrice = parseInt(itemPriceNoSymbol);\n            priceArray.push(itemPrice);\n            //checks that we're getting the correct total, then adds all of prices together, creating a subtotal\n            if (priceArray.length === myCart.length) {\n              const reducer = (accumulator, curr) => accumulator + curr;\n              subtotal = priceArray.reduce(reducer);\n              //adds tax\n              total = (subtotal * 1.15).toFixed(2);\n            }\n\n            return (\n              <ItemDiv>\n                <DescriptionDiv>\n                  <Img src={item.imageSrc} alt={item.name} />\n                  <SubDescripion>\n                    <ItemName>{item.name}</ItemName>\n                    <Remove onClick={deleteItem} id={item._id}>\n                      Remove\n                    </Remove>\n                  </SubDescripion>\n                </DescriptionDiv>\n                <QuantityDiv>\n                  <QuantityButton id={item._id}>-</QuantityButton>\n                  <ItemQuantity>{quantity}</ItemQuantity>\n                  <QuantityButton>+</QuantityButton>\n                </QuantityDiv>\n                <PriceDiv>\n                  <ItemPrice>{item.price}</ItemPrice>\n                </PriceDiv>\n              </ItemDiv>\n            );\n          })}\n        </LeftDiv>\n        <RightDiv>\n          <Form onSubmit={handleSubmit}>\n            <Div>Order Summary</Div>\n            <Subtotal>\n              <Bold>Subtotal</Bold> ${subtotal}\n            </Subtotal>\n            <Total>\n              <Bold>Total</Bold> ${total}\n            </Total>\n            <Div>Personal Information</Div>\n            <TextArea placeholder=\"Name\" required></TextArea>\n            <TextArea placeholder=\"Surname\" required></TextArea>\n            <TextArea placeholder=\"Email\" required></TextArea>\n            <CheckoutButton>Checkout</CheckoutButton>\n          </Form>\n        </RightDiv>\n      </Wrapper>\n    );\n  }\n};\nconst Bold = styled.span`\n  font-weight: bold;\n  margin-right: 15px;\n`;\nconst CheckoutButton = styled.button`\n  width: 90%;\n  border-radius: 15px;\n  font-family: var(--secondary-font-family);\n  font-size: 25px;\n  border: none;\n  margin-top: 10px;\n  background-color: #ff9966;\n  color: white;\n  cursor: pointer;\n`;\nconst Subtotal = styled.div`\n  font-family: var(--secondary-font-family);\n  font-size: 20px;\n`;\nconst Total = styled.div`\n  font-family: var(--secondary-font-family);\n  font-size: 20px;\n  margin-bottom: 15px;\n`;\nconst Div = styled.div`\n  font-family: var(--primary-font-family);\n  font-size: 30px;\n`;\nconst TextArea = styled.textarea`\n  width: 90%;\n  resize: none;\n  font-family: var(--secondary-font-family);\n  font-size: 17px;\n`;\nconst Form = styled.form``;\nconst SubDescripion = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\nconst Remove = styled.button`\n  background: none;\n  border: none;\n  color: grey;\n  font-family: var(--primary-font-family);\n  font-size: 17px;\n  width: 30px;\n  padding: 0;\n  cursor: pointer;\n`;\nconst CategoryDiv = styled.div`\n  width: 100%;\n  border-bottom: 1px black solid;\n  color: grey;\n  font-size: 15px;\n  display: flex;\n`;\nconst Description = styled.div`\n  width: 60%;\n  font-family: var(--primary-font-family);\n  margin-top: 3px;\n  padding-left: 5px;\n`;\nconst DescriptionDiv = styled.div`\n  height: 100%;\n  width: 60%;\n  display: flex;\n  padding-right: 10px;\n  align-items: center;\n`;\nconst Quantity = styled.div`\n  width: 20%;\n  font-family: var(--primary-font-family);\n  margin-top: 3px;\n`;\nconst CartQuantity = styled.div`\n  font-family: var(--primary-font-family);\n  font-size: 40px;\n`;\nconst QuantityButton = styled.button`\n  background: none;\n  border: none;\n  font-size: 17px;\n  cursor: pointer;\n`;\nconst ItemQuantity = styled.div``;\nconst QuantityDiv = styled.div`\n  display: flex;\n  width: 20%;\n  align-items: center;\n  padding-left: 7px;\n`;\nconst Price = styled.div`\n  width: 20%;\n  font-family: var(--primary-font-family);\n  margin-top: 3px;\n`;\nconst PriceDiv = styled.div`\n  width: 20%;\n  display: flex;\n  align-items: center;\n  padding-left: 10px;\n`;\nconst ItemPrice = styled.div`\n  font-family: var(--secondary-font-family);\n  font-weight: bold;\n  font-size: 17px;\n`;\nconst ShoppingCart = styled.div`\n  font-family: var(--primary-font-family);\n  font-size: 50px;\n`;\nconst HeaderDiv = styled.div`\n  width: 100%;\n  border-bottom: 1px black solid;\n  margin-top: 10px;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n`;\nconst ItemName = styled.div`\n  font-family: var(--primary-font-family);\n  font-size: 20px;\n`;\nconst Img = styled.img`\n  width: 80px;\n  padding-right: 10px;\n`;\nconst ItemDiv = styled.div`\n  padding: 15px;\n  border-bottom: 1px black solid;\n  display: flex;\n`;\nconst LeftDiv = styled.div`\n  width: 60vw;\n`;\nconst RightDiv = styled.div`\n  background-color: #fff3e1;\n  width: 30vw;\n  display: flex;\n  flex-direction: column;\n  padding-left: 15px;\n  padding-top: 50px;\n`;\nconst Wrapper = styled.div`\n  width: 90vw;\n  color: black;\n  position: relative;\n  top: 8vh;\n  left: 10vw;\n  display: flex;\n`;\n\nexport default Checkout;\n"]},"metadata":{},"sourceType":"module"}